%syntax-version=1.0.0
%project=myapp

create_extension_pgcrypto 2025-06-17T02:49:37Z sqitch <sqitch@9d756dbb21f1> # Create pgcrypto extension
create_schema_api 2025-06-17T02:49:38Z sqitch <sqitch@9d756dbb21f1> # Create api schema
comment_schema_api 2025-06-17T02:49:39Z sqitch <sqitch@9d756dbb21f1> # Comment on schema api
another_comment 2025-06-17T02:49:39Z sqitch <sqitch@9d756dbb21f1> # Comment on schema api
create_table_customer 2025-06-17T02:49:40Z sqitch <sqitch@9d756dbb21f1> # Create customer table
create_table_api_customer 2025-06-17T02:49:41Z sqitch <sqitch@9d756dbb21f1> # Create api.customer table
create_table_movie 2025-06-17T02:49:41Z sqitch <sqitch@9d756dbb21f1> # Add movie table
create_table_api_movie 2025-06-17T02:49:42Z sqitch <sqitch@9d756dbb21f1> # Add api.movie table
create_function_myfunc 2025-06-17T02:49:42Z sqitch <sqitch@9d756dbb21f1> # Add myfunc function
create_function_api_myfunc 2025-06-17T02:49:42Z sqitch <sqitch@9d756dbb21f1> # Add api.myfunc function
create_function_update 2025-06-17T02:49:43Z sqitch <sqitch@9d756dbb21f1> # Add update function
create_function_api_update 2025-06-17T02:49:43Z sqitch <sqitch@9d756dbb21f1> # Add api.update function
create_trigger_update_customer_on_customer 2025-06-17T02:49:44Z sqitch <sqitch@9d756dbb21f1> # Add update_customer trigger on customer
create_trigger_update_api_customer_on_api_customer 2025-06-17T02:49:44Z sqitch <sqitch@9d756dbb21f1> # Add update_api_customer trigger on api.customer
create_trigger_modify_customer_on_customer 2025-06-17T02:49:45Z sqitch <sqitch@9d756dbb21f1> # Add modify_customer trigger on customer
create_trigger_modify_api_customer_on_api_customer 2025-06-17T02:49:45Z sqitch <sqitch@9d756dbb21f1> # Add modify_api_customer trigger on api.customer
create_role_authenticator 2025-06-17T02:49:46Z sqitch <sqitch@9d756dbb21f1> # Create authenticator role
create_role_api_user 2025-06-17T02:49:46Z sqitch <sqitch@9d756dbb21f1> # Create api_user role
grant_schema_api_usage_to_api_user 2025-06-17T02:49:46Z sqitch <sqitch@9d756dbb21f1> # Grant api schema usage to api_user
grant_execute_myfunc_to_api_user 2025-06-17T02:49:47Z sqitch <sqitch@9d756dbb21f1> # Grant execute myfunc to api_user
grant_execute_api_myfunc_to_api_user 2025-06-17T02:49:47Z sqitch <sqitch@9d756dbb21f1> # Grant execute api.myfunc to api_user
grant_membership_authenticator_to_api_user 2025-06-17T02:49:48Z sqitch <sqitch@9d756dbb21f1> # Grant authenticator membership to api_user
grant_table_privileges_select_on_customer_to_api_user 2025-06-17T02:49:48Z sqitch <sqitch@9d756dbb21f1> # Grant select on customer table to api_user
grant_table_privileges_select_on_api_customer_to_api_user 2025-06-17T02:49:49Z sqitch <sqitch@9d756dbb21f1> # Grant select on api.customer table to api_user
